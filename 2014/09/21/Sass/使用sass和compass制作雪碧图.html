<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用Sass和Compass制作雪碧图 | Drupal 笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="作为一名Web开发人员，在关注浏览器性能的时候，雪碧图(“image spriting”)这样的技术诞生了，旨在减少HTTP的请求数。事实证明，更少的请求数（当文件大小没有显著的区别时）对于一个页面的加载速度有明显的区别。">
<meta property="og:type" content="article">
<meta property="og:title" content="使用Sass和Compass制作雪碧图">
<meta property="og:url" content="http://ddnode.com/2014/09/21/Sass/使用sass和compass制作雪碧图.html">
<meta property="og:site_name" content="Drupal 笔记">
<meta property="og:description" content="作为一名Web开发人员，在关注浏览器性能的时候，雪碧图(“image spriting”)这样的技术诞生了，旨在减少HTTP的请求数。事实证明，更少的请求数（当文件大小没有显著的区别时）对于一个页面的加载速度有明显的区别。">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-8.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-9.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-11.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-12.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-13.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-10.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-14.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-15.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-16.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-17.jpg">
<meta property="og:image" content="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-18.jpg">
<meta property="og:updated_time" content="2015-03-29T11:01:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用Sass和Compass制作雪碧图">
<meta name="twitter:description" content="作为一名Web开发人员，在关注浏览器性能的时候，雪碧图(“image spriting”)这样的技术诞生了，旨在减少HTTP的请求数。事实证明，更少的请求数（当文件大小没有显著的区别时）对于一个页面的加载速度有明显的区别。">
  
    <link rel="alternative" href="/atom.xml" title="Drupal 笔记" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="//lib.sinaapp.com/js/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/avatar.jpeg">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Boy</a></h1>
		</hgroup>

		
		<p class="header-subtitle">记录生活学习中的点点滴滴</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/tags/前端">前端</a></li>
				        
							<li><a href="/tags/Drupal">Drupal</a></li>
				        
							<li><a href="http://blog.ddnode.com">旧站</a></li>
				        
							<li><a href="/about/index.html">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/ddnode" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/nodewebs" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Compass/" style="font-size: 11.67px;">Compass</a> <a href="/tags/Drupal/" style="font-size: 16.67px;">Drupal</a> <a href="/tags/Nginx/" style="font-size: 13.33px;">Nginx</a> <a href="/tags/Placeholder/" style="font-size: 10px;">Placeholder</a> <a href="/tags/Sass/" style="font-size: 18.33px;">Sass</a> <a href="/tags/Theme/" style="font-size: 10px;">Theme</a> <a href="/tags/Tools/" style="font-size: 10px;">Tools</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/laravel/" style="font-size: 10px;">laravel</a> <a href="/tags/中级/" style="font-size: 13.33px;">中级</a> <a href="/tags/函数/" style="font-size: 10px;">函数</a> <a href="/tags/列表/" style="font-size: 10px;">列表</a> <a href="/tags/初级/" style="font-size: 15px;">初级</a> <a href="/tags/前端/" style="font-size: 20px;">前端</a> <a href="/tags/变量/" style="font-size: 11.67px;">变量</a> <a href="/tags/嵌套/" style="font-size: 10px;">嵌套</a> <a href="/tags/技巧/" style="font-size: 10px;">技巧</a> <a href="/tags/组织项目/" style="font-size: 10px;">组织项目</a> <a href="/tags/译文/" style="font-size: 10px;">译文</a> <a href="/tags/选择器/" style="font-size: 10px;">选择器</a> <a href="/tags/雪碧图/" style="font-size: 10px;">雪碧图</a> <a href="/tags/项目管理/" style="font-size: 10px;">项目管理</a> <a href="/tags/高级/" style="font-size: 10px;">高级</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Boy</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/avatar.jpeg">
				<hgroup>
				  <h1 class="header-author">Boy</h1>
				</hgroup>
			</div>
			
			<p class="header-subtitle">记录生活学习中的点点滴滴</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/前端">前端</a></li>
		        
					<li><a href="/tags/Drupal">Drupal</a></li>
		        
					<li><a href="http://blog.ddnode.com">旧站</a></li>
		        
					<li><a href="/about/index.html">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/ddnode" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/nodewebs" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-Sass/使用sass和compass制作雪碧图" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/21/Sass/使用sass和compass制作雪碧图.html" class="article-date">
  	<time datetime="2014-09-20T16:00:00.000Z" itemprop="datePublished">2014-09-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      使用Sass和Compass制作雪碧图
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Compass/">Compass</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sass/">Sass</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/中级/">中级</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/雪碧图/">雪碧图</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/译文/">译文</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>作为一名Web开发人员，在关注浏览器性能的时候，雪碧图(“image spriting”)这样的技术诞生了，旨在减少HTTP的请求数。事实证明，更少的请求数（当文件大小没有显著的区别时）对于一个页面的加载速度有明显的区别。<br><a id="more"></a></p>
<blockquote>
<p>本文由<a href="http://www.w3cplus.com" target="_blank" rel="external">大漠</a>根据<a href="http://twitter.com/goschevski" target="_blank" rel="external">Aleksandar Goševski</a>的《<a href="http://thesassway.com/intermediate/spriting-with-sass-and-compass" target="_blank" rel="external">Spriting with Sass and Compass</a>》所译，整个系列共分四章，整个译文带有我们自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明原作者相关信息<a href="http://thesassway.com/intermediate/spriting-with-sass-and-compass" target="_blank" rel="external">http://thesassway.com/intermediate/spriting-with-sass-and-compass</a>。</p>
<p>——作者：<a href="http://twitter.com/goschevski" target="_blank" rel="external">Aleksandar Goševski</a></p>
<p>——<a href="http://www.w3cplus.com" target="_blank" rel="external">大漠</a></p>
</blockquote>
<p>作为一名Web开发人员，在关注浏览器性能的时候，雪碧图(“image spriting”)这样的技术诞生了，旨在减少HTTP的请求数。事实证明，更少的请求数（当文件大小没有显著的区别时）对于一个页面的加载速度有明显的区别。</p>
<p>“Image Spriting”的工作原理是一堆的图像（称为“sprites”,精灵）合并成一张大的图像（国内称为雪碧图），以达到减少HTTP的请求数。然后通过<code>background-position</code>巧妙的显示雪碧图中需要呈现的图像。</p>
<p>下图是一个工具栏的雪碧图：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-8.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p>鉴于上面的图片，我们可以为媒体图标这样写样式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$icon-width: 24px;&#10;$icon-height: 24px;&#10;$icons: image-url(&#39;toolbar.png&#39;);&#10;&#10;.media-icon &#123;&#10;  background-image: $icons;&#10;  background-position: -($icon-width * 5) -($icon-width * 1);&#10;  width: $icon-width;&#10;  height: $icon-height;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>这样做是媒体图像是背景图中X轴方向的第五个之后，Y轴第一个图像之后：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-9.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p>雪碧图是出名的难维护。添加一个新的图像需要更新图像与相关的CSS。更糟糕的是如果你要删除一个图像时，会变得更为复杂。你会怎么做呢？重新做过一张雪碧图？</p>
<p>##Compass来拯救你</p>
<p>幸运的是，Chris Eppstein的<a href="http://compass-style.org/" target="_blank" rel="external">Compass</a>项目包括了一套强大的工具，用于自动创建和维护雪碧图。Compass可以创建雪碧图，给出每个图的精确坐标，还可以让你控制图的布局下间距，并在SCSS中写入需要的图像。总之，Compass中制作雪碧图的工具，将节省你大量的时间与精力。</p>
<p>我并不想从头开始介绍Compass，因为这是项目浩大的工程，况且<a href="http://thesassway.com/beginner/getting-started-with-sass-and-compass" target="_blank" rel="external">官网已经有很多教程</a>。如果你并不熟悉Compass，我建议你先阅读这些教程先。</p>
<p>##目录结构</p>
<p>根据Compass制作雪碧图的基本原理，你把图像放在一个文件夹中，而且这个文件夹放在<code>images/</code>的目录下，Compass会根据您提供的源图片生成一张雪碧图。对于我们工具栏的例子，我将图片源都放在了<code>images/toolbar</code>目录下，就像下面这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">images/&#10;|&#10;`-- toolbar/&#10;    |-- bold.png&#10;    |-- italic.png&#10;    |-- link.png&#10;    |-- code.png&#10;    |-- unordered-list.png&#10;    |-- ordered-list.png&#10;    ...</span><br></pre></td></tr></table></figure>
<p>请记住，你应该只把需要的图片源放到这个文件夹内。Compass会利用这些图片源合并出你最图需要的雪碧图。</p>
<blockquote>
<p>为了能更好的通过示例演示Compass和Sass实现雪碧图，将原文中的示例换成下图所示：（为了不去找图片源，我使用了我电脑中的一些图片以示说明）</p>
</blockquote>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-11.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p>##最简单的方法</p>
<p>制作雪碧图最简单的方法就是使用Compass的<code>@import</code>命令：</p>
<pre><code><span class="at_rule">@<span class="keyword">import</span> <span class="string">"images/toolbar/*.png"</span></span>;
</code></pre><blockquote>
<p>如果你的Sass更新到了最新版本(Sass 3.3.7 (Maptastic Maple))，那么运行上面的命令将无法实现，在命令终端会报错误信息。这个时候你只需要在命令终端运行：<code>gem install compass --pre</code>。使用<code>compass -v</code>命令查看你的版本号是不是：Compass 1.0.0.alpha.19。如果无误，我们可以继续往下。</p>
<p>下面内容是译者实战中的经验：</p>
</blockquote>
<p>为了能更好的实战Compass和Sass制作雪碧图，将原文中的结构换成了上图的效果，从图中可以看出，我们所有<code>*.png</code>放在一个名叫“<strong>Color</strong>”的文件目录之下，而且这个文件夹是放置在“<strong><code>images/</code></strong>”之下。如果按照原文教程所言，在<code>.scss</code>文件中直接通过<code>@import</code>命令引用：</p>
<pre><code><span class="at_rule">@<span class="keyword">import</span> <span class="string">"images/toolbar/*.png"</span></span>;
</code></pre><p>根据示例所示，我们只需要把<code>toolbar</code>换成我们的<code>Color</code>:</p>
<pre><code><span class="at_rule">@<span class="keyword">import</span> <span class="string">"images/Color/*.png"</span></span>;
</code></pre><p>开启<code>compass watch</code>命令，终端会提示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62;&#62;&#62; Compass is watching for changes. Press Ctrl-C to Stop.&#10;     info sass/screen.scss was modified&#10;overwrite stylesheets/ie.css&#10;overwrite stylesheets/print.css&#10;    error sass/screen.scss (Line 8: No files were found in the load path matching &#34;images/Color/*.png&#34;. Your current load paths are: /Applications/XAMPP/xamppfiles/htdocs/Sites/sass-test/images)&#10;overwrite stylesheets/screen.css</span><br></pre></td></tr></table></figure>
<p>文件路径错误，按照我们写CSS的经验，我将路径做相应的调整：</p>
<pre><code><span class="at_rule">@<span class="keyword">import</span> <span class="string">"../images/Color/*.png"</span></span>;
</code></pre><p>命令检测到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info sass/screen.scss was modified&#10;identical stylesheets/ie.css&#10;identical stylesheets/print.css&#10;   remove images/Color-s36a4fadee6.png&#10;   create images/Color-s1760dc49ac.png&#10;overwrite stylesheets/screen.css</span><br></pre></td></tr></table></figure>
<p>虽然不报错，但看编译出来的<code>.css</code>文件，不难发现路径存在问题：</p>
<pre><code><span class="class">.Color-sprite</span> <span class="rules">{
    <span class="rule"><span class="attribute">background-image</span>:<span class="value"> <span class="function">url</span>(<span class="string">'/images/../images/Color-s1760dc49ac.png'</span>)</span></span>;
    <span class="rule"><span class="attribute">background-repeat</span>:<span class="value"> no-repeat</span></span>;
}</span>
</code></pre><p>说实在的，这让我困惑。后来，我在想，是不是Compass已具备此功能，我们只需要将路径改成包含图片的文件夹开始，于是我尝试这样写：</p>
<pre><code><span class="at_rule">@<span class="keyword">import</span> <span class="string">"Color/*.png"</span></span>;
</code></pre><p>命令终端也不路径错误，而且编译出来的CSS也是我想要的：</p>
<pre><code><span class="class">.Color-sprite</span> <span class="rules">{
    <span class="rule"><span class="attribute">background-image</span>:<span class="value"> <span class="function">url</span>(<span class="string">'/images/Color-s36a4fadee6.png'</span>)</span></span>;
    <span class="rule"><span class="attribute">background-repeat</span>:<span class="value"> no-repeat</span></span>;
}</span>
</code></pre><p>此时在你的项目的”images/“可以看到一张名为“<code>Color-s36a4fadee6.png</code>”的图，如下所示：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-12.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"><br>大家可能会感到非常神奇，想知道为什么？那么我们接下来回到原文。</p>
<p>在Compass看到<code>@import</code>指令的参数为<code>*.png</code>时，它会假定将这个目录下的所有<code>.png</code>图片制作成一张雪碧图。让他生成一个mixin，使您在项目中更好的使用雪碧图。</p>
<p>其中mixin可以为雪碧图的所有图像生成对应的类。对于mixin的名称是基于引入图的文件夹名。例如我们的示例：</p>
<pre><code>@<span class="preprocessor"><span class="keyword">include</span> all-toolbar-sprites;</span>
</code></pre><p>编译出来的CSS：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.toolbar-sprite, .toolbar-bold, .toolbar-italic, .toolbar-link &#123;&#10;  background-image: url(&#39;../images/toolbar-s1f1c6cbfd0.png&#39;);&#10;  background-repeat: no-repeat;&#10;&#125;&#10;&#10;.toolbar-bold &#123;&#10;  background-position: 0 0;&#10;&#125;&#10;&#10;.toolbar-italic &#123;&#10;  background-position: 0 -24px;&#10;&#125;&#10;&#10;.toolbar-link &#123;&#10;  background-position: 0 -48px;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>请注意，Compass为我们自动创建了一张“toolbar-s1f1c6cbfd0.png”图片。这就是我们的雪碧图。这命名我们放图像的文件夹(在这个例子中叫toolbar)加上一串字母和数字。每当你更新图片源时，缓存的CSS就知道，并且会更新雪碧图。</p>
<blockquote>
<p>我们再次回到我实战的用例中来（是不是感觉蛮乱的，有点神游）。按照原文的教程所言，我在实际用例中是这样做的：</p>
</blockquote>
<p>在<code>.scss</code>文件通过<code>@include</code>调用Compass生成的mixin：</p>
<pre><code>@<span class="preprocessor"><span class="keyword">include</span> all-Color-sprites;</span>
</code></pre><p>输出的CSS代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.Color-sprite, .Color-Behance, .Color-Deviantart, .Color-Dribbble, .Color-Facebook, .Color-Forrst, .Color-Github, .Color-LastFM, .Color-LinkedIn, .Color-Picasa, .Color-RSS, .Color-Skype, .Color-Tumblr, .Color-Twitter, .Color-Youtube &#123;&#10;  background-image: url(&#39;/images/Color-s36a4fadee6.png&#39;);&#10;  background-repeat: no-repeat;&#10;&#125;&#10;&#10;.Color-Behance &#123;&#10;  background-position: 0 0;&#10;&#125;&#10;&#10;.Color-Deviantart &#123;&#10;  background-position: 0 -52px;&#10;&#125;&#10;&#10;.Color-Dribbble &#123;&#10;  background-position: 0 -104px;&#10;&#125;&#10;&#10;.Color-Facebook &#123;&#10;  background-position: 0 -156px;&#10;&#125;&#10;&#10;.Color-Forrst &#123;&#10;  background-position: 0 -208px;&#10;&#125;&#10;&#10;.Color-Github &#123;&#10;  background-position: 0 -260px;&#10;&#125;&#10;&#10;.Color-LastFM &#123;&#10;  background-position: 0 -312px;&#10;&#125;&#10;&#10;.Color-LinkedIn &#123;&#10;  background-position: 0 -364px;&#10;&#125;&#10;&#10;.Color-Picasa &#123;&#10;  background-position: 0 -416px;&#10;&#125;&#10;&#10;.Color-RSS &#123;&#10;  background-position: 0 -468px;&#10;&#125;&#10;&#10;.Color-Skype &#123;&#10;  background-position: 0 -520px;&#10;&#125;&#10;&#10;.Color-Tumblr &#123;&#10;  background-position: 0 -572px;&#10;&#125;&#10;&#10;.Color-Twitter &#123;&#10;  background-position: 0 -624px;&#10;&#125;&#10;&#10;.Color-Youtube &#123;&#10;  background-position: 0 -676px;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>##控制类名</p>
<p>如果你想更好的控制输出，不使用混合宏<code>all-{文件夹名称}-sprites</code>。在Compass你也可以使用单独的单独的混合宏。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &#34;images/toolbar/*.png&#34;;&#10;&#10;.bold-icon &#123; @include toolbar-sprite(bold); &#125;&#10;.italic-icon &#123; @include toolbar-sprite(italic); &#125;&#10;.link-icon &#123; @include toolbar-sprite(link); &#125;</span><br></pre></td></tr></table></figure>
<p>这些混合宏同样是根据雪碧图的名称命名的。在我们的示例中“<code>toolbar-sprite</code>”。</p>
<blockquote>
<p>在很多时候，我们希望调用的图片是根据需要调用雪碧图上的图像。Compass非常的强大，除了可以通过混合宏<code>all-{文件夹名称}-sprites</code>一次生成所有图像的CSS（类名是<code>Color-图像源文件名</code>）之外，还可以通过混合宏<code>{文件夹名称}-sprites({图像源文件名})</code>来实现按需加载，并且自定义类名。我们来看个简单的示例：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &#34;Color/*.png&#34;;&#10;&#10;&#10;.icon-twitter &#123;&#10;&#9;@include Color-sprite(Twitter);&#10;&#125;&#10;.icon-facebook&#123;&#10;&#9;@include Color-sprite(Facebook);&#10;&#125;&#10;.icon-youtube&#123;&#10;&#9;@include Color-sprite(Youtube);&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>输出的CSS:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.Color-sprite, .icon-twitter, .icon-facebook, .icon-youtube &#123;&#10;  background-image: url(&#39;/images/Color-s36a4fadee6.png&#39;);&#10;  background-repeat: no-repeat;&#10;&#125;&#10;&#10;.icon-twitter &#123;&#10;  background-position: 0 -624px;&#10;&#125;&#10;&#10;.icon-facebook &#123;&#10;  background-position: 0 -156px;&#10;&#125;&#10;&#10;.icon-youtube &#123;&#10;  background-position: 0 -676px;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>##雪碧地图（Sprite maps）</p>
<p>如果你真的需要一个更低级的，Compass同样可以满足你，他提供了另一种工具——<strong>雪碧地图(Sprite maps)</strong>。让你在内部控制你的雪碧图。</p>
<p>使用雪碧地图，我们就不再使用<code>@import</code>指令了，是这样使用的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$icons: sprite-map(&#34;toolbar/*.png&#34;);&#10;&#10;.bold-icon &#123; background: sprite($icons, bold); &#125;&#10;.italic-icon &#123; background: sprite($icons, italic); &#125;&#10;.link-icon &#123; background: sprite($icons, link); &#125;</span><br></pre></td></tr></table></figure>
<p>请注意，没有使用生成的雪碧图的混合宏，而是使用生成的雪碧地图的混合宏<code>sprite</code>，在对应的类名上插入图像。</p>
<blockquote>
<p>同样，我们自己动手实战一下雪碧地图的功能。根据示例，我们也做一定调整：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$icons: sprite-map(&#34;Color/*.png&#34;);&#10;&#10;.icon-twitter &#123;&#10;&#9;background: sprite($icons,Twitter);&#10;&#125;&#10;.icon-facebook&#123;&#10;&#9;background: sprite($icons,Facebook);&#10;&#125;&#10;.icon-youtube&#123;&#10;&#9;background: sprite($icons,Youtube);&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>生成的CSS如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.icon-twitter &#123;&#10;  background: url(&#39;/images/Color-s29211bcaaa.png&#39;) 0 -624px;&#10;&#125;&#10;&#10;.icon-facebook &#123;&#10;  background: url(&#39;/images/Color-s29211bcaaa.png&#39;) 0 -156px;&#10;&#125;&#10;&#10;.icon-youtube &#123;&#10;  background: url(&#39;/images/Color-s29211bcaaa.png&#39;) 0 -676px;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>##控制间距</p>
<p>很多时候，我们制作雪碧图时，每个图像之间需要有一定的空白距离。在实际应用中，这一点也是非常重要的。</p>
<p>比如在每个icon四周设置一个间距：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// &#20351;&#29992;@import&#10;$toolbar-spacing: 5px;&#10;@import &#34;toolbar/*.png&#34;;&#10;&#10;// &#20351;&#29992;Sprite Maps&#10;$icons: sprite-map(&#34;toolbar/*.png&#34;, $spacing: 5px);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在我们实际用例中，我们每个icon的大小是52px*52px。为了更好的适应偶数计算，我希望每个icon之间有一个8px的间距。根据上面介绍，我们可以这样做。</p>
</blockquote>
<p>先来看<code>@import</code>的方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$Color-spacing: 8px;&#10;@import &#34;Color/*.png&#34;;&#10;&#10;.icon-twitter &#123;&#10;&#9;@include Color-sprite(Twitter);&#10;&#125;&#10;.icon-facebook&#123;&#10;&#9;@include Color-sprite(Facebook);&#10;&#125;&#10;.icon-youtube&#123;&#10;&#9;@include Color-sprite(Youtube);&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>这个时候Compass会重新生成一张雪碧图，我们将有无间距的两张雪碧图来对比一下：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-13.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p><strong>特别注意，使用<code>@import</code>指令，我们定义变量时需要以<code>{文件夹名称}-spacing:间距值；</code>格式来定义，如果你的变量名和放置图片源的文件夹名称不匹配，将无法生成带有间距的雪碧图。</strong></p>
<p>接下来看第二种，就是雪碧地图的方式：</p>
<pre><code><span class="variable">$icons</span>: sprite-map(<span class="string">"Color/*.png"</span>,<span class="variable">$spacing</span>:<span class="number">8</span>px);
</code></pre><p>这种方式与第一种方式生成的雪碧图是一样的。</p>
<p>##控制布局</p>
<p>Compass支持几种不同的布局方式，就是雪碧图中icon的排列方式：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-10.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"><br>包括四种排列方式：vertical、horizontal、diagonal和smart。其中vertical为其默认的排列方式。</p>
<p>在不同的生成雪碧图方式中，其使用方式也略有不同。也就是<code>@import</code>和雪碧地图，设置方式不同：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// &#20351;&#29992;@import&#10;$toolbar-spacing: 5px;&#10;$toolbar-layout: &#39;smart&#39;;&#10;@import &#34;toolbar/*.png&#34;;&#10;&#10;// &#20351;&#29992;&#38634;&#30887;&#22320;&#22270;Sprite Maps&#10;$icons: sprite-map(&#34;toolbar/*.png&#34;, $spacing: 5px, $layout: diagonal);</span><br></pre></td></tr></table></figure>
<p><strong>注意：在当前版本，你不能同时使用间距和智能(<code>smart</code>)布局。</strong></p>
<blockquote>
<p>我们接下来亲自实战一下这四种排列图标的效果。</p>
</blockquote>
<p>###垂直排列</p>
<p>使用Compass生成雪碧图，其图像中的icon排列方式是按垂直方式排列，这种排列方式也是其默认的排列方式，不需要显式的声明。当然，你显示的声明也是可以的。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$Color-spacing: 8px;&#10;$Color-layout: &#34;vertical&#34;;&#10;@import &#34;Color/*.png&#34;;</span><br></pre></td></tr></table></figure>
<p>生成的雪碧图如下：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-14.jpg" style="padding:2px;border:1px solid #ccc;width:450px;"></p>
<p>###水平排列</p>
<p>按照上面的方式，将<code>$Color-layout</code>变量的值设置为“<strong>horizontal</strong>”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$Color-spacing: 8px;&#10;$Color-layout: &#34;horizontal&#34;;&#10;@import &#34;Color/*.png&#34;;</span><br></pre></td></tr></table></figure>
<p>生成的雪碧图如下所示：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-15.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p>###斜角排列（成45度角）</p>
<p>同样的将<code>$Color-layout</code>变量的值设置为“<strong>diagonal</strong>”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$Color-spacing: 8px;&#10;$Color-layout: &#34;diagonal&#34;;&#10;@import &#34;Color/*.png&#34;;</span><br></pre></td></tr></table></figure>
<p>生成的雪碧图如下所示：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-16.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p>###智能排列</p>
<p>将<code>$Color-layout</code>值设置为”<strong>smart</strong>“：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$Color-spacing: 8px;&#10;$Color-layout: &#34;smart&#34;;&#10;@import &#34;Color/*.png&#34;;</span><br></pre></td></tr></table></figure>
<p>可以生成的雪碧图与默认垂直的效果是一样的。我在想是不是哪操作失误。前面有说过间距和智能排列不能同时出现，虽然我的Compass是<code>pre</code>版本，我还是尝试禁用了间距的设置。可还是依旧。效果跟前面示意完全不同。我在想是不是因为icon大小都一样，我不仿修改一下，加过一张不同类型的图片到源文件夹中。</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-17.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p>这个时候，重新看看生成出来的雪碧图效果：</p>
<p><img alt="使用Sass和Compass制作雪碧图" data-pinit="registered" src="http://cdn.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2014/1405/sass-compass-18.jpg" style="padding:2px;border:1px solid #ccc;width:650px;"></p>
<p>效果出来了。</p>
<p><strong>特别提醒：使用Compass设置图标排列方式时，定义变量的方式和定义间距变量方式类似，需要和对应的源图的文件夹结合起来。比如我们此处所有图片源都放在<code>Color</code>的文件夹中，那么定义的变量名是：<code>Color-layout</code>。也就是<code>${文件夹名称}-layout:[vertical][horizontal][diagonal][smart]</code>。</strong></p>
<p>上面演示的是通过<code>@import</code>指令生成雪碧图的排列方式，那么在雪碧地图中使用方法类似，你只需要修改参数<code>$layout</code>的值即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$icons: sprite-map(&#34;Color/*.png&#34;,$spacing:8px,$layout:smart);</span><br></pre></td></tr></table></figure>
<p>##其它函数和混合宏功能</p>
<p>Compass还为雪碧地图提供了一些其他的函数(<code>function</code>)和混合宏（<code>mixin</code>）功能：</p>
<ul>
<li><strong><code>sprite-url($icons)</code>：</strong>返回雪碧图的URL</li>
<li><strong><code>sprite-position($icons,bold)</code>：</strong>返回“bold”图标在雪碧图中的X轴和Y轴的坐标值</li>
<li><strong><code>@include sprite-dimensions($icons,link)</code>：</strong>根据雪碧图的原始尺寸设置like图标的宽度和高度。</li>
</ul>
<p>使用方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$icons: sprite-map(&#34;toolbar/*.png&#34;, $spacing: 5px, $layout: diagonal);&#10;.bold-icon &#123;&#10;  background-image: sprite-url($icons);&#10;  background-position: sprite-position($icons, bold);&#10;  @include sprite-dimensions($icons, bold);&#10;&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>根据上面所述，亲自体会了一回：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$icons: sprite-map(&#34;Color/*.png&#34;,$spacing:8px,$layout:smart);&#10;&#10;.icon-twitter &#123;&#10;&#9;background-image: sprite-url($icons);&#10;&#9;background-position: sprite-position($icons,Twitter);&#10;&#9;//@include sprite-dimensions($icons,Twitter);&#10;&#125;&#10;.icon-facebook&#123;&#10;&#9;background-image: sprite-url($icons);&#10;&#9;background-position: sprite-position($icons,Facebook);&#10;&#9;//@include sprite-dimensions($icons,Facebook);&#10;&#125;&#10;.icon-youtube&#123;&#10;&#9;background-image: sprite-url($icons);&#10;&#9;background-position: sprite-position($icons,Youtube);&#10;&#9;//@include sprite-dimensions($icons,Youtube);&#10;&#125;&#10;.icon-ctrip&#123;&#10;&#9;background-image: sprite-url($icons);&#10;&#9;background-position: sprite-position($icons,Ctrip);&#10;&#9;//@include sprite-dimensions($icons,Ctrip);&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>大家都看到了，我把<code>@include sprite-dimensions()</code>功能给注释掉了，因为在我的环境中没有编译成功。目前我也还没有查出切确原因。希望有知道原因的同学希望能分享一下。最后编译出来的CSS：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.icon-twitter &#123;&#10;  background-image: url(&#39;/images/Color-s6ea6182c52.png&#39;);&#10;  background-position: -156px 0;&#10;&#125;&#10;&#10;.icon-facebook &#123;&#10;  background-image: url(&#39;/images/Color-s6ea6182c52.png&#39;);&#10;  background-position: 0 0;&#10;&#125;&#10;&#10;.icon-youtube &#123;&#10;  background-image: url(&#39;/images/Color-s6ea6182c52.png&#39;);&#10;  background-position: 0 -52px;&#10;&#125;&#10;&#10;.icon-ctrip &#123;&#10;  background-image: url(&#39;/images/Color-s6ea6182c52.png&#39;);&#10;  background-position: 0 -208px;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>##更深层次的挖掘</p>
<p>使用Compass制作雪碧图，其实还有很多，信不信由你。以上只是一个简单的教程。如果你对这方面感兴趣，可以阅读<a href="http://compass-style.org/help/tutorials/spriting/" target="_blank" rel="external">官网提供的教程</a>，或者从这里<a href="http://compass-style.org/search/?q=sprites" target="_blank" rel="external">查阅其他文档</a>。</p>
<p>##扩展阅读</p>
<ul>
<li><a href="http://viget.com/inspire/stop-making-sprites-compass-sass-and-png-sprite-generation" target="_blank" rel="external">Stop Making Sprites (Compass, Sass, and PNG Sprite Generation)</a></li>
<li><a href="http://jlzych.com/2013/09/01/automating-semantic-sprites-with-compass/" target="_blank" rel="external">Automating Semantic Sprites with Compass</a></li>
<li><a href="http://www.wearecube.ch/how-to-make-icons-for-the-web-2/" target="_blank" rel="external">How to make icons for the Web [part 2]</a></li>
<li><a href="http://www.w3cplus.com/preprocessor/compass-image-sprite.html" target="_blank" rel="external">使用Compass生成雪碧图</a></li>
</ul>
<p><strong>译者手语：</strong>整个翻译依照原文线路进行，并在翻译过程略加了个人对技术的理解。如果翻译有不对之处，还烦请同行朋友指点。谢谢！</p>
<p>如需转载烦请注明出处：</p>
<p>英文出处：<a href="http://thesassway.com/intermediate/spriting-with-sass-and-compass" target="_blank" rel="external">http://thesassway.com/intermediate/spriting-with-sass-and-compass</a></p>
<p>中文译文：<a href="http://www.w3cplus.com/preprocessor/intermediate/spriting-with-sass-and-compass.html" target="_blank" rel="external">http://www.w3cplus.com/preprocessor/intermediate/spriting-with-sass-and-compass.html</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/09/21/Sass/保持sass的简单.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          保持Sass的简单
        
      </div>
    </a>
  
  
    <a href="/2014/09/21/Sass/sass中的反三角函数.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Sass中的反三角函数</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>






<section id="comments">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ddnode'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Boy
    	</div>
      	<div class="footer-right">
      		<a href="//ddnode.com/">Drupal 笔记</a>
      	</div>
    </div>
  </div>
</footer>

    </div>
    

<script src="/js/mobile.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






  </div>
</body>
</html>